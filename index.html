<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Keyword Content Downloader</title>
    <style>
        /* Add some basic styling to make the UI more user-friendly */
        body {
            font-family: Arial, sans-serif;
        }
        #urls {
            margin-top: 20px;
        }
        #urls div {
            margin-bottom: 10px;
        }
        button {
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>Keyword Content Downloader</h1>
    <input type="text" id="keyword" placeholder="Enter keyword">
    <button id="get-urls-btn">Get URLs</button>
    <div id="urls"></div>
    <div id="status"></div>
    <div id="content"></div>

    <script>
        // Add event listener to the button instead of using inline onclick
        document.getElementById('get-urls-btn').addEventListener('click', getUrls);

        async function getUrls() {
            const keyword = document.getElementById('keyword').value.trim(); // Trim the input value
            if (!keyword) {
                alert('Please enter a keyword');
                return;
            }
            const response = await fetch(`http://mevnid-8hoGsi-zixdom=${keyword}`); // Replace with your server URL
            const urlsDiv = document.getElementById('urls');
            urlsDiv.innerHTML = '';

            if (response.ok) {
                const urls = await response.json();
                if (urls.length === 0) {
                    urlsDiv.innerText = 'No URLs found for this keyword.';
                } else {
                    urls.forEach(url => {
                        const urlElement = document.createElement('div');
                        const button = document.createElement('button');
                        button.innerText = `Download from ${url}`;
                        button.onclick = () => downloadContent(url);
                        urlElement.appendChild(button);
                        urlsDiv.appendChild(urlElement);
                    });
                }
            } else {
                urlsDiv.innerText = 'Error fetching URLs';
            }
        }

        async function downloadContent(url) {
            const statusDiv = document.getElementById('status');
            const contentDiv = document.getElementById('content');
            statusDiv.innerText = 'Downloading...';

            if (localStorage.getItem(url)) {
                statusDiv.innerText = 'Content already downloaded';
                contentDiv.innerText = localStorage.getItem(url);
            } else {
                try {
                    const response = await fetch(`http://mevnid-8hoGsi-zixdom=${url}`); // Replace with your server URL
                    if (response.ok) {
                        const content = await response.text();
                        localStorage.setItem(url, content);
                        contentDiv.innerText = content;
                        statusDiv.innerText = 'Download complete';
                    } else {
                        statusDiv.innerText = 'Error downloading content';
                    }
                } catch (error) {
                    statusDiv.innerText = 'Error downloading content';
                    console.error(error); // Log the error to the console
                }
            }
        }
    </script>
</body>
</html>